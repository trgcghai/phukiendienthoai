<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="../assets/bootstrap-5.3.3-dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="../css/library.css" />
    <link rel="stylesheet" href="../css/header.css" />
    <link rel="stylesheet" href="../css/footer.css" />
    <link rel="stylesheet" href="../css/detailProduct.css" />
    <script src="../assets/bootstrap-5.3.3-dist/js/bootstrap.min.js"></script>
    <title>Document</title>
  </head>
  <body>
    <header class="header">
      <div class="header_container">
        <div class="logo">
          <a href="../index.html" class="header_link">Phukiendienthoai</a>
        </div>

        <div class="categories" data-bs-toggle="modal">
          <div class="category_icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 512 512"
            >
              <path
                fill="white"
                d="M40 48C26.7 48 16 58.7 16 72v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V232c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V392c0-13.3-10.7-24-24-24H40z"
              />
            </svg>
          </div>
          Danh mục
        </div>

        <div class="search_box">
          <input
            type="text"
            class="search_input"
            placeholder="Bạn cần tìm gì ?"
          />
          <div class="search_icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 512 512"
            >
              <path
                fill="gray"
                d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"
              />
            </svg>
          </div>
        </div>

        <div class="track_order">
          <a href="" class="track_order_link">
            <div class="track_order_icon">
              <svg
                viewBox="0 0 18 24"
                width="25"
                height="25"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M13.9637 2.95195H10.7919C10.373 1.79337 9.27584 0.954399 7.97918 0.954399C6.68252 0.954399 5.58535 1.79337 5.16643 2.95195H1.99461C0.897441 2.95195 -0.000244141 3.85085 -0.000244141 4.9495L0.0462926 21.0481C0.0462926 22.1467 0.943978 23.0456 2.04115 23.0456H8.13543C7.54533 22.4721 7.32914 22.1792 6.98295 21.4322H1.67845L1.63191 4.58457H3.98947V5.39127C3.98947 6.48992 4.88715 7.38882 5.98432 7.38882H9.97404C11.0712 7.38882 11.9689 6.48992 11.9689 5.39127V4.58457H14.2811V10.4389C14.9893 10.5388 15.3402 10.7486 15.9586 11.0382V4.9495C15.9586 3.85085 15.0609 2.95195 13.9637 2.95195ZM7.97918 5.39127C7.34445 5.39127 6.52838 4.98792 6.52838 3.95073C6.52838 3.37451 6.93641 2.56781 7.97918 2.56781C8.52777 2.56781 9.38465 2.98544 9.38465 3.95073C9.38465 4.91601 8.65794 5.39127 7.97918 5.39127ZM13.0129 13.0579C10.26 13.0579 8.02572 15.2951 8.02572 18.0517C8.02572 20.8084 10.26 23.0456 13.0129 23.0456C15.7658 23.0456 18 20.8084 18 18.0517C18 15.2951 15.7658 13.0579 13.0129 13.0579ZM14.2995 20.0493L12.6538 18.4013C12.5607 18.3085 12.5071 18.1832 12.5042 18.0517V15.5648C12.5042 15.2851 12.7236 15.0654 13.0029 15.0654C13.2822 15.0654 13.5016 15.2851 13.5016 15.5648V17.852L14.9977 19.3501C15.0443 19.3959 15.0814 19.4504 15.1069 19.5106C15.1323 19.5708 15.1456 19.6354 15.1459 19.7007C15.1462 19.7661 15.1336 19.8308 15.1088 19.8913C15.084 19.9517 15.0474 20.0066 15.0013 20.0528C14.9551 20.099 14.9003 20.1356 14.84 20.1605C14.7796 20.1853 14.7149 20.198 14.6497 20.1976C14.5844 20.1973 14.5199 20.184 14.4598 20.1586C14.3997 20.1331 14.3452 20.096 14.2995 20.0493Z"
                  fill="white"
                ></path>
              </svg>
            </div>
            <span class="track_order_text"> Tra cứu đơn hàng </span>
          </a>
        </div>

        <div class="cart">
          <a href="" class="cart_link">
            <div class="cart_icon">
              <svg
                viewBox="0 0 20 20"
                width="23"
                height="23"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M4.22111 3L3.84216 1H1M4.22111 3H19L15.2105 12.0455H5.73689M4.22111 3L5.73689 12.0455M5.73689 12.0455L3.56458 13.293C2.96774 13.923 3.5309 14.9091 4.375 14.9091H9.625H12.25L15.2105 15M15.2105 15C14.708 15 14.2261 15.2107 13.8708 15.5858C13.5154 15.9609 13.3158 16.4696 13.3158 17C13.3158 17.5304 13.5154 18.0391 13.8708 18.4142C14.2261 18.7893 14.708 19 15.2105 19C15.7131 19 16.195 18.7893 16.5503 18.4142C16.9056 18.0391 17.1053 17.5304 17.1053 17C17.1053 16.4696 16.9056 15.9609 16.5503 15.5858C16.195 15.2107 15.7131 15 15.2105 15ZM7.63162 17C7.63162 17.5304 7.432 18.0391 7.07667 18.4142C6.72134 18.7893 6.2394 19 5.73689 19C5.23438 19 4.75245 18.7893 4.39711 18.4142C4.04178 18.0391 3.84216 17.5304 3.84216 17C3.84216 16.4696 4.04178 15.9609 4.39711 15.5858C4.75245 15.2107 5.23438 15 5.73689 15C6.2394 15 6.72134 15.2107 7.07667 15.5858C7.432 15.9609 7.63162 16.4696 7.63162 17Z"
                  stroke="white"
                  stroke-width="1.7"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </div>
            Giỏ hàng
          </a>
        </div>

        <div class="user">
          <a href="./login.html" class="user_link">
            <div class="user_icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="23"
                height="23"
                viewBox="0 0 448 512"
              >
                <path
                  fill="white"
                  d="M304 128a80 80 0 1 0 -160 0 80 80 0 1 0 160 0zM96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM49.3 464H398.7c-8.9-63.3-63.3-112-129-112H178.3c-65.7 0-120.1 48.7-129 112zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3z"
                />
              </svg>
            </div>
            Đăng nhập
          </a>
        </div>
      </div>
    </header>

    <main class="container">
      <div class="categories_list_container">
        <ul class="categories_list">
          <li class="categories_item">
            <a href="./allBoSacProducts.html" class="categories_item_link"
              >Bộ sạc</a
            >
          </li>
          <li class="categories_item">
            <a href="./allDaySacProducts.html" class="categories_item_link"
              >Dây sạc</a
            >
          </li>
          <li class="categories_item">
            <a href="./allPinDuPhongProducts.html" class="categories_item_link"
              >Pin dự phòng</a
            >
          </li>
          <li class="categories_item">
            <a href="./allTaiNgheProducts.html" class="categories_item_link"
              >Tai nghe</a
            >
          </li>
          <li class="categories_item">
            <a href="./allAppleProducts.html" class="categories_item_link"
              >Phụ kiện Apple</a
            >
          </li>
          <li class="categories_item">
            <a href="./allOtherProducts.html" class="categories_item_link"
              >Khác
            </a>
          </li>
        </ul>
      </div>

      <div class="product_container">
        <div class="product_wrapper">
          <div class="product_image_container">
            <img
              src="../assets/images/bosac/cu-sac-nhanh-65w-ugreen-15579-robogan-mini-247x247.jpg"
              class="product_image"
              alt=""
              id="product_image"
            />
          </div>
          <div class="product_info_container">
            <div class="product_info">
              <div class="info_name" id="product_name">tên sản phẩm</div>
              <div class="info_price" id="product_price">giá sản phẩm</div>
              <div class="info_quantity">
                <div class="input_label">Chọn số lượng</div>
                <div class="input-group">
                  <button class="btn btn-outline" id="minus_btn" type="button">
                    -
                  </button>
                  <input
                    type="text"
                    id="quantity_input"
                    class="form-control"
                    value="1"
                    aria-label="Example text with two button addons"
                  />
                  <button class="btn btn-outline" id="add_btn" type="button">
                    +
                  </button>
                </div>
              </div>
              <div class="info_btn">
                <button type="button" class="btn btn-primary addToCart_btn">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    height="22"
                    width="22"
                    fill="white"
                    class="btn_icon"
                    viewBox="0 0 576 512"
                  >
                    <path
                      d="M0 24C0 10.7 10.7 0 24 0H69.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H199.7c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5H24C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96zM252 160c0 11 9 20 20 20h44v44c0 11 9 20 20 20s20-9 20-20V180h44c11 0 20-9 20-20s-9-20-20-20H356V96c0-11-9-20-20-20s-20 9-20 20v44H272c-11 0-20 9-20 20z"
                    />
                  </svg>
                  Thêm vào giỏ hàng
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="product_description">
          <h5 class="description_title">Thông tin sản phẩm</h5>
          <p class="description_content" id="product_description"></p>
        </div>
      </div>

      <div class="product_related">
        <div class="product_related_title">Sản phẩm liên quan</div>
        <div class="product_related_link">
          <a href="" class="all_link">Xem tất cả ></a>
        </div>
        <div class="product_list"></div>
      </div>
    </main>

    <footer class="footer">
      <div class="footer_container">
        <div class="infor">
          22692311 - Trương Công Hải - Đại học Công nghiệp TPHCM
        </div>

        <div class="copyright">
          © 2024 - Bản quyền thuộc về Phukiendienthoai
        </div>
      </div>
    </footer>

    <div class="backdrop"></div>

    <script src="../js/handleCategoryModal.js"></script>

    <script type="module">
      import { all } from "../assets/images/prepareData.js";
      const allLink = document.querySelector(".all_link");
      const curProduct = all.find(
        (item) => item.id == localStorage.getItem("productId")
      );
      const productImage = document.getElementById("product_image");
      const productName = document.getElementById("product_name");
      const productPrice = document.getElementById("product_price");
      const productDescription = document.getElementById("product_description");

      document.title = curProduct.ten;
      if (curProduct.loai[0] === "apple") {
        allLink.href = "./allAppleProducts.html";
      } else if (curProduct.loai[0] === "other") {
        allLink.href = "./allOtherProducts.html";
      } else if (curProduct.loai[0] === "tainghe") {
        allLink.href = "./allTaiNgheProducts.html";
      } else if (curProduct.loai[0] === "pinduphong") {
        allLink.href = "./allPinDuPhongProducts.html";
      } else if (curProduct.loai[0] === "bosac") {
        allLink.href = "./allBoSacProducts.html";
      } else if (curProduct.loai[0] === "daysac") {
        allLink.href = "./allDaySacProducts.html";
      }

      productImage.src = `../assets/images/${curProduct.image}`;
      productImage.alt = `${curProduct.ten}`;
      productName.innerText = `${curProduct.ten}`;
      productPrice.innerText = `${
        curProduct.gia.toLocaleString("en", {
          minimumFractionDigits: 0,
          maximumFractionDigits: 3,
        }) + " VND"
      }`;
      productDescription.innerText = `${curProduct.mota}`;

      const loadData = (data) => {
        let html = "";
        data
          .filter((item) => item !== curProduct)
          .forEach((item) => {
            html += `
          <div class="product_item">
              <div class="card h-100">
                <img src="../assets/images/${
                  item.image
                }" class="card-img-top item_image" alt="${item.ten}" />
                <div class="card-body">
                  <h5 class="card-title item_name">${item.ten}</h5>
                  <p class="card-text item_price">${
                    item.gia.toLocaleString("en", {
                      minimumFractionDigits: 0,
                      maximumFractionDigits: 3,
                    }) + " VND"
                  }</p>
                </div>
                <div class="card-footer d-grid">
                    <a href="#" class="btn btn-primary item_link_btn" id=${
                      item.id
                    }
                      >Xem chi tiết</a
                    >
                  </div>
              </div>
            </div>
          `;
          });
        document.querySelector(".product_list").innerHTML = html;
      };

      loadData([...all].filter((item) => item.loai[0] === curProduct.loai[0]));

      const detailBtns = document.querySelectorAll(".item_link_btn");
      detailBtns.forEach((btn) => {
        btn.addEventListener("click", () => {
          localStorage.setItem("productId", btn.id);
          window.location.href = "./detailProduct.html";
        });
      });
    </script>

    <script>
      const addBtn = document.getElementById("add_btn");
      const minusBtn = document.getElementById("minus_btn");
      const quantityInput = document.getElementById("quantity_input");

      addBtn.addEventListener("click", () => {
        quantityInput.value = parseInt(quantityInput.value) + 1;
      });

      minusBtn.addEventListener("click", () => {
        quantityInput.value =
          parseInt(quantityInput.value) - 1 <= 0
            ? 1
            : parseInt(quantityInput.value) - 1;
      });
    </script>
  </body>
</html>
