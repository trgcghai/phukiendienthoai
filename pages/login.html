<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="../assets/bootstrap-5.3.3-dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="../css/header.css" />
    <link rel="stylesheet" href="../css/footer.css" />
    <link rel="stylesheet" href="../css/login.css" />
    <script src="../assets/bootstrap-5.3.3-dist/js/bootstrap.min.js"></script>
    <title>Đề tài web</title>
  </head>
  <body>
    <header class="header">
      <div class="header_container">
        <div class="logo">
          <a href="../index.html" class="header_link">Phukiendienthoai</a>
        </div>
      </div>
    </header>

    <main class="main">
      <div class="form login_form">
        <h2 class="form_title">Đăng nhập</h2>
        <div class="form_ask">
          Chưa có tài khoản ?
          <button class="form_link toSignUp">Đăng ký tại đây</button>
        </div>
        <form>
          <div class="form_section mb-3">
            <label for="login_email" class="form-label">Email</label>
            <input
              required
              type="email"
              class="form-control"
              id="login_email"
              aria-describedby="emailHelp"
            />
            <div id="emailHelp" class="form-text"></div>
          </div>
          <div class="form_section mb-3">
            <label for="login_password" class="form-label">Mật khẩu</label>
            <input
              required
              type="password"
              class="form-control"
              id="login_password"
              aria-describedby="passwordHelp"
            />
            <div id="passwordHelp" class="form-text"></div>
          </div>
          <div class="form_section mb-3">
            <a href="" class="form_forgetPassword">Quên mật khẩu ?</a>
          </div>
          <div class="form_section d-grid">
            <button class="btn btn-primary submit_btn login_btn">
              Đăng nhập
            </button>
          </div>
        </form>
      </div>

      <div class="form signup_form">
        <h2 class="form_title">Đăng ký</h2>
        <div class="form_ask">
          Đã có tài khoản ?
          <button class="form_link toLogin">Đăng nhập tại đây</button>
        </div>
        <form>
          <div class="form_section mb-3">
            <label for="signup_email" class="form-label">Email</label>
            <input
              required
              type="email"
              class="form-control"
              id="signup_email"
              aria-describedby="signup-emailHelp"
            />
            <div id="signup-emailHelp" class="form-text"></div>
          </div>
          <div class="form_section mb-3">
            <label for="signup_password" class="form-label">Mật khẩu</label>
            <input
              required
              type="password"
              class="form-control"
              id="signup_password"
              aria-describedby="signup-passwordHelp"
            />
            <div id="signup-passwordHelp" class="form-text"></div>
          </div>
          <div class="form_section mb-3">
            <label for="signup_cfpassword" class="form-label"
              >Nhập lại mật khẩu</label
            >
            <input
              required
              type="password"
              class="form-control"
              id="signup_cfpassword"
              aria-describedby="cfpasswordHelp"
            />
            <div id="cfpasswordHelp" class="form-text"></div>
          </div>
          <div class="form_section mb-3 mt-4 d-grid">
            <button class="btn btn-primary submit_btn signup_btn">
              Đăng ký
            </button>
          </div>
          <div class="form_section">
            <span class="form_policy"
              >Bằng việc đăng ký, bạn đã đồng ý với chúng tôi về
              <span class="policy">Điều khoản dịch vụ</span> &
              <span class="policy">Chính sách bảo mật</span>
            </span>
          </div>
        </form>
      </div>
    </main>

    <footer class="footer">
      <div class="footer_container">
        <div class="infor">
          22692311 - Trương Công Hải - Đại học Công nghiệp TPHCM
        </div>

        <div class="copyright">
          © 2024 - Bản quyền thuộc về Phukiendienthoai
        </div>
      </div>
    </footer>

    <script>
      const redirectLoginBtn = document.querySelector(".toLogin");
      const redirectSignUpBtn = document.querySelector(".toSignUp");
      const submitLogin = document.querySelector(".login_btn");
      const submitSignUp = document.querySelector(".signup_btn");

      const resetLoginForm = () => {
        const email = document.getElementById("login_email");
        const password = document.getElementById("login_password");

        document.getElementById("emailHelp").innerText = "";
        document.getElementById("passwordHelp").innerText = "";
        email.style.border = "1px solid #ccc";
        password.style.border = "1px solid #ccc";
        email.value = "";
        password.value = "";
      };

      const resetSignUpForm = () => {
        const email = document.getElementById("signup_email");
        const password = document.getElementById("signup_password");
        const cfpassword = document.getElementById("signup_cfpassword");

        document.getElementById("signup-emailHelp").innerText = "";
        document.getElementById("signup-passwordHelp").innerText = "";
        document.getElementById("cfpasswordHelp").innerText = "";
        email.style.border = "1px solid #ccc";
        password.style.border = "1px solid #ccc";
        cfpassword.style.border = "1px solid #ccc";
        email.value = "";
        password.value = "";
        cfpassword.value = "";
      };

      redirectSignUpBtn.addEventListener("click", () => {
        document.querySelector(".login_form").style.display = "none";
        document.querySelector(".signup_form").style.display = "block";
        resetSignUpForm();
      });

      redirectLoginBtn.addEventListener("click", () => {
        document.querySelector(".login_form").style.display = "block";
        document.querySelector(".signup_form").style.display = "none";
        resetLoginForm();
      });

      const handleLogin = () => {
        const email = document.getElementById("login_email");
        const password = document.getElementById("login_password");

        if (!/\S+@\S+\.\S+/.test(email.value)) {
          const emailText = document.getElementById("emailHelp");
          emailText.style.color = "red";
          emailText.innerText = "Email không hợp lệ!! Vui lòng thử lại";
          email.style.border = "1px solid red";
        } else {
          const emailText = document.getElementById("emailHelp");
          emailText.style.color = "green";
          emailText.innerText = "Chính xác !!";
          email.style.border = "1px solid green";
        }
        if (password.value !== "12345678") {
          const passwordText = document.getElementById("passwordHelp");
          passwordText.style.color = "red";
          passwordText.innerText =
            "Mật khẩu không chính xác!! Vui lòng thử lại";
          password.style.border = "1px solid red";
          return;
        } else {
          const passwordText = document.getElementById("passwordHelp");
          passwordText.style.color = "green";
          passwordText.innerText = "Chính xác !!";
          password.style.border = "1px solid green";
        }

        window.location.href = "../index.html";
        email.value = "";
        password.value = "";
      };
      submitLogin.addEventListener("click", (e) => {
        e.preventDefault();
        handleLogin();
      });

      const handleSignUp = () => {
        const email = document.getElementById("signup_email");
        const password = document.getElementById("signup_password");
        const cfpassword = document.getElementById("signup_cfpassword");

        if (!/\S+@\S+\.\S+/.test(email.value)) {
          const emailText = document.getElementById("signup-emailHelp");
          emailText.style.color = "red";
          emailText.innerText = "Email không hợp lệ!! Vui lòng thử lại";
          email.style.border = "1px solid red";
        } else {
          const emailText = document.getElementById("signup-emailHelp");
          emailText.style.color = "green";
          emailText.innerText = "Email hợp lệ";
          email.style.border = "1px solid green";
        }
        if (
          password.value.trim().length < 8 ||
          password.value.trim().length > 20
        ) {
          const passwordText = document.getElementById("signup-passwordHelp");
          passwordText.style.color = "red";
          passwordText.innerText = "Mật khẩu phải từ 8 đến 20 kí tự";
          password.style.border = "1px solid red";
        } else {
          const passwordText = document.getElementById("signup-passwordHelp");
          passwordText.style.color = "green";
          passwordText.innerText = "Mật khẩu hợp lệ";
          password.style.border = "1px solid green";
        }
        if (
          cfpassword.value.trim().length < 8 ||
          cfpassword.value.trim().length > 20
        ) {
          const cfpasswordText = document.getElementById("cfpasswordHelp");
          cfpasswordText.style.color = "red";
          cfpasswordText.innerText = "Mật khẩu phải từ 8 đến 20 kí tự";
          cfpassword.style.border = "1px solid red";
          return;
        } else {
          if (password.value.trim() !== cfpassword.value.trim()) {
            const cfpasswordText = document.getElementById("cfpasswordHelp");
            cfpasswordText.style.color = "red";
            cfpasswordText.innerText = "Mật khẩu không trùng khớp";
            cfpassword.style.border = "1px solid red";
            return;
          } else {
            const cfpasswordText = document.getElementById("cfpasswordHelp");
            cfpasswordText.style.color = "green";
            cfpasswordText.innerText = "Mật khẩu trùng khớp";
            cfpassword.style.border = "1px solid green";
          }
        }

        window.location.href = "../index.html";
        email.value = "";
        password.value = "";
        cfpassword.value = "";
      };
      submitSignUp.addEventListener("click", (e) => {
        e.preventDefault();
        handleSignUp();
      });
    </script>
  </body>
</html>
