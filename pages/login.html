<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="../assets/bootstrap-5.3.3-dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="../css/library.css" />
    <link rel="stylesheet" href="../css/header.css" />
    <link rel="stylesheet" href="../css/footer.css" />
    <link rel="stylesheet" href="../css/login.css" />
    <script src="../assets/bootstrap-5.3.3-dist/js/bootstrap.min.js"></script>
    <script src="../js/jquery-3.7.1.min.js"></script>
    <title>Đăng nhập</title>
  </head>
  <body>
    <header
      class="header container-fluid position-fixed top-0 start-0 end-0 d-flex align-items-center justify-content-center"
      style="z-index: 1000"
    >
      <div
        class="header_container container p-0 d-flex align-items-center justify-content-between"
      >
        <div class="logo">
          <a
            href="../index.html"
            class="header_link d-block text-light cursor-pointer text-decoration-none"
            >Phukiendienthoai</a
          >
        </div>
      </div>
    </header>

    <div class="container">
      <main
        class="main bg-white border position-relative"
        style="
          border-radius: 8px;
          box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
        "
      >
        <div
          class="d-flex w-100 align-items-center justify-content-around position-relative z-2"
        >
          <div
            class="w-50 p-3 bg-white login-display"
            style="border-radius: 8px"
          >
            <div class="fs-2 text-center my-2">Đăng nhập</div>
            <div class="fs-6 text-secondary text-center d-lg-none d-block my-2">
              Lần đầu biết đến chúng tôi ?
              <span
                id="linkToSignUp"
                style="color: var(--main-color); cursor: pointer"
                >Đăng ký ngay !!</span
              >
            </div>
            <form class="mx-auto w-100">
              <div class="mb-3">
                <label for="loginUsername" class="d-block mb-1">Username</label>
                <input
                  type="text"
                  class="d-block border px-2 py-1 w-100"
                  style="outline: none; border-radius: 4px"
                  id="loginUsername"
                />
                <small id="loginUsernameMessage" class="text-danger"></small>
              </div>
              <div class="mb-3">
                <label for="loginPwd" class="d-block mb-1">Mật khẩu</label>
                <input
                  type="password"
                  class="d-block border px-2 py-1 w-100"
                  style="outline: none; border-radius: 4px"
                  id="loginPwd"
                />
                <small id="loginPwdMessage" class="text-danger"></small>
              </div>
              <div class="mb-3 d-grid">
                <button
                  type="button"
                  class="border-0 text-light py-2"
                  style="
                    background-color: var(--main-color);
                    border-radius: 8px;
                  "
                  id="loginBtn"
                >
                  Đăng nhập
                </button>
              </div>
              <div class="mb-3 text-secondary position-relative text-center">
                <div
                  class="border-bottom position-absolute"
                  style="width: 44%; top: 50%; left: 0"
                ></div>
                Hoặc
                <div
                  class="border-bottom position-absolute"
                  style="width: 44%; bottom: 50%; right: 0"
                ></div>
              </div>
              <div class="mb-3 d-grid">
                <div
                  class="p-2 border third-party-btn mb-2"
                  style="border-radius: 8px; cursor: pointer"
                >
                  <div class="d-flex align-items-center gap-2">
                    <img src="../assets/icon/google.jpg" height="25px" alt="" />
                    Đăng nhập với Google
                  </div>
                </div>
                <div
                  class="p-2 border third-party-btn"
                  style="border-radius: 8px; cursor: pointer"
                >
                  <div class="d-flex align-items-center gap-2">
                    <img
                      src="../assets/icon/facebook.png"
                      height="25px"
                      alt=""
                    />
                    Đăng nhập với Facebook
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div
            class="w-50 p-3 bg-white signUp-display d-lg-block d-none"
            style="border-radius: 8px"
          >
            <div class="fs-2 text-center my-2">Đăng ký</div>
            <div class="fs-6 text-secondary text-center d-lg-none d-block my-2">
              Đã có tài khoản ?
              <span
                id="linkToLogin"
                style="color: var(--main-color); cursor: pointer"
                >Đăng nhập ngay !!</span
              >
            </div>
            <form class="mx-auto w-100">
              <div class="mb-3">
                <label for="email" class="d-block mb-1">Email</label>
                <input
                  type="email"
                  class="d-block border px-2 py-1 w-100"
                  style="outline: none; border-radius: 4px"
                  id="email"
                />
                <small id="emailMessage" class="text-danger"></small>
              </div>
              <div class="mb-3">
                <label for="realName" class="d-block mb-1">Họ tên</label>
                <input
                  type="text"
                  class="d-block border px-2 py-1 w-100"
                  style="outline: none; border-radius: 4px"
                  id="realName"
                />
                <small id="realNameMessage" class="text-danger"></small>
              </div>
              <div class="mb-3">
                <label for="signUpUserName" class="d-block mb-1"
                  >Username</label
                >
                <input
                  type="text"
                  class="d-block border px-2 py-1 w-100"
                  style="outline: none; border-radius: 4px"
                  id="signUpUserName"
                />
                <small id="signUpUserNameMessage" class="text-danger"></small>
              </div>
              <div class="mb-3">
                <label for="signUpPwd" class="d-block mb-1">Mật khẩu</label>
                <input
                  type="password"
                  class="d-block border px-2 py-1 w-100"
                  style="outline: none; border-radius: 4px"
                  id="signUpPwd"
                />
                <small id="signUpPwdMessage" class="text-danger"></small>
              </div>
              <div class="mb-3">
                <label for="confirmPwd" class="d-block mb-1"
                  >Xác nhận mật khẩu</label
                >
                <input
                  type="password"
                  class="d-block border px-2 py-1 w-100"
                  style="outline: none; border-radius: 4px"
                  id="confirmPwd"
                />
                <small id="confirmPwdMessage" class="text-danger"></small>
              </div>
              <div class="mb-3">
                <label for="address" class="d-block mb-1">Địa chỉ</label>
                <input
                  type="text"
                  class="d-block border px-2 py-1 w-100"
                  style="outline: none; border-radius: 4px"
                  id="address"
                />
                <small id="addressMessage" class="text-danger"></small>
              </div>
              <div class="mb-3">
                <label for="birthday" class="d-block mb-1">Ngày sinh</label>
                <input
                  type="date"
                  class="d-block border px-2 py-1 w-100"
                  style="outline: none; border-radius: 4px"
                  id="birthday"
                />
                <small id="birthdayMessage" class="text-danger"></small>
              </div>
              <div class="mb-3">
                <label for="phone" class="d-block mb-1">Số điện thoại</label>
                <input
                  type="text"
                  class="d-block border px-2 py-1 w-100"
                  style="outline: none; border-radius: 4px"
                  id="phone"
                />
                <small id="phoneMessage" class="text-danger"></small>
              </div>
              <div class="mb-3">
                <label for="" class="d-block mb-1">Giới tính</label>
                <div class="wrapper">
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="gender"
                      id="male-check"
                      value="male"
                      checked
                    />
                    <label class="form-check-label" for="male-check">Nam</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="gender"
                      id="female-check"
                      value="female"
                    />
                    <label class="form-check-label" for="female-check"
                      >Nữ</label
                    >
                  </div>
                </div>
              </div>
              <div class="mb-3 d-grid">
                <button
                  type="button"
                  class="border-0 text-light py-2"
                  style="
                    background-color: var(--main-color);
                    border-radius: 8px;
                  "
                  id="signUpBtn"
                >
                  Đăng ký
                </button>
              </div>
              <div class="mb-3 text-secondary position-relative text-center">
                <div
                  class="border-bottom position-absolute"
                  style="width: 44%; top: 50%; left: 0"
                ></div>
                Hoặc
                <div
                  class="border-bottom position-absolute"
                  style="width: 44%; bottom: 50%; right: 0"
                ></div>
              </div>
              <div
                class="mb-3 d-flex align-items-center justify-content-center gap-3"
              >
                <div
                  class="p-2 border third-party-btn"
                  style="border-radius: 8px; cursor: pointer; width: 48%"
                >
                  <img src="../assets/icon/google.jpg" height="25px" alt="" />
                  Đăng ký với Google
                </div>
                <div
                  class="p-2 border third-party-btn"
                  style="border-radius: 8px; cursor: pointer; width: 48%"
                >
                  <img src="../assets/icon/facebook.png" height="25px" alt="" />
                  Đăng ký với Facebook
                </div>
              </div>
            </form>
          </div>
        </div>

        <div
          class="position-absolute w-100 h-100 top-0 start-0 row p-0 m-0 d-lg-block d-none"
        >
          <div
            class="col col-6 w-50 h-100 d-flex align-items-center justify-content-center flex-column login-layer position-absolute top-0 start-0 z-2 d-none"
            style="background-color: var(--main-color); border-radius: 8px"
          >
            <div
              class="fs-2 text-light text-uppercase fw-bold text-center"
              style="letter-spacing: 2px"
            >
              Chào mừng trở lại
            </div>
            <div class="fs-5 text-light w-50 mt-3 text-center">
              Giữ kết nối với chúng tôi bằng cách đăng nhập với thông tin của
              bạn
            </div>
            <button
              type="button"
              id="changeToLogin"
              class="border-white text-light mt-3 px-4 py-3"
              style="
                background-color: var(--main-color);
                border-radius: 32px;
                border: 3px #fff solid;
              "
            >
              Đăng nhập ngay
            </button>
          </div>
          <div
            class="col col-6 w-50 h-100 d-flex align-items-center justify-content-center flex-column signUp-layer position-absolute top-0 end-0 z-3"
            style="background-color: var(--main-color); border-radius: 8px"
          >
            <div
              class="fs-2 text-light text-uppercase fw-bold text-center"
              style="letter-spacing: 2px"
            >
              Chào mừng đến với Phukiendienthoai
            </div>
            <div class="fs-5 text-light w-50 mt-3 text-center">
              Tham gia vào cộng đồng của chúng tôi và bắt đầu cuộc hành trình
              của bạn bằng cách đăng ký
            </div>
            <button
              type="button"
              id="changeToSignUp"
              class="border-white text-light mt-3 px-4 py-3"
              style="
                background-color: var(--main-color);
                border-radius: 32px;
                border: 3px #fff solid;
              "
            >
              Đăng ký ngay
            </button>
          </div>
        </div>
      </main>
    </div>

    <footer
      class="footer container-fluid bottom-0 w-100 text-light d-flex align-items-center justify-content-center"
    >
      <div
        class="footer_container p-0 m-0 container d-flex align-items-center justify-content-center p-0"
      >
        <div class="copyright" style="color: #fff !important">
          © 2024 - Bản quyền thuộc về Phukiendienthoai
        </div>
      </div>
    </footer>

    <div class="toast-container position-fixed top-0 end-0 p-3">
      <div
        id="liveToast"
        class="toast"
        style="background-color: rgba(255, 255, 255, 1) !important"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
        data-bs-autohide="true"
        data-bs-delay="5000"
      >
        <div class="d-flex">
          <div class="toast-body fs-6">Chức năng hiện chưa sẵn sàng !!</div>
          <button
            type="button"
            class="btn-close me-2 m-auto"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
      </div>
    </div>

    <script>
      $(document).ready(() => {
        const toast = new bootstrap.Toast($("#liveToast"));

        $(".third-party-btn").each((index, item) => {
          $(item).click(() => {
            toast.show();
          });
        });

        const closeToast = $(".btn-close");
        closeToast.click(() => {
          toast.hide();
        });
      });
    </script>

    <script>
      $(document).ready(() => {
        const loginUsername = $("#loginUsername");
        const loginPwd = $("#loginPwd");

        const signUpUsername = $("#signUpUserName");
        const email = $("#email");
        const signUpPwd = $("#signUpPwd");
        const confirmPwd = $("#confirmPwd");
        const address = $("#address");
        const birthday = $("#birthday");
        const phone = $("#phone");
        const realName = $("#realName");
        const genderMale = $("male-check");
        const genderFemale = $("female-check");

        const loginBtn = $("#loginBtn");
        const signUpBtn = $("#signUpBtn");
        const linkToLogin = $("#linkToLogin");
        const linkToSignUp = $("#linkToSignUp");

        linkToLogin.click(() => {
          $(".signUp-display").addClass("d-none");
          $(".login-display").removeClass("d-none");
          $(".footer").attr("style", "");
        });

        linkToSignUp.click(() => {
          $(".signUp-display").removeClass("d-none");
          $(".login-display").addClass("d-none");
          $(".footer").attr("style", "position: relative !important");
        });

        const resetLoginForm = () => {
          loginUsername.val("");
          loginPwd.val("");

          $(`#${loginUsername.attr("id") + "Message"}`).text("");
          $(`#${loginPwd.attr("id") + "Message"}`).text("");
        };

        const resetSignUpForm = () => {
          signUpUsername.val("");
          email.val("");
          signUpPwd.val("");
          confirmPwd.val("");
          address.val("");
          birthday.val("");
          phone.val("");
          realName.val("");
          genderMale.attr("checked", true);

          $(`#${signUpUsername.attr("id") + "Message"}`).text("");
          $(`#${email.attr("id") + "Message"}`).text("");
          $(`#${signUpPwd.attr("id") + "Message"}`).text("");
          $(`#${confirmPwd.attr("id") + "Message"}`).text("");
          $(`#${address.attr("id") + "Message"}`).text("");
          $(`#${birthday.attr("id") + "Message"}`).text("");
          $(`#${phone.attr("id") + "Message"}`).text("");
          $(`#${realName.attr("id") + "Message"}`).text("");
        };

        $("#changeToLogin").click(() => {
          $(".login-layer").addClass("d-none");
          $(".login-layer").addClass("z-2");
          $(".login-layer").removeClass("z-3");

          $(".signUp-layer").removeClass("d-none");
          $(".signUp-layer").removeClass("z-2");
          $(".signUp-layer").addClass("z-3");
          $(".signUp-layer").addClass("slideToRight");

          resetLoginForm();
        });

        $("#changeToSignUp").click(() => {
          $(".login-layer").addClass("slideToLeft");
          $(".login-layer").removeClass("d-none");
          $(".login-layer").removeClass("z-2");
          $(".login-layer").addClass("z-3");

          $(".signUp-layer").addClass("d-none");
          $(".signUp-layer").addClass("z-2");
          $(".signUp-layer").removeClass("z-3");

          resetSignUpForm();
        });

        const checkUserName = (userNameTxt) => {
          const userName = userNameTxt.val().trim();
          if (userName.length === 0) {
            $(`#${userNameTxt.attr("id") + "Message"}`).text(
              "Không được để trống"
            );
            return false;
          }
          if (!/^[\w\s\d]+$/.test(userName)) {
            $(`#${userNameTxt.attr("id") + "Message"}`).text(
              "Username không hợp lệ"
            );
            return false;
          }

          $(`#${userNameTxt.attr("id") + "Message"}`).text("");
          return true;
        };
        loginUsername.blur(() => {
          checkUserName(loginUsername);
        });

        const checkLoginPwd = () => {
          const pwd = loginPwd.val().trim();
          if (pwd.length === 0) {
            $(`#${loginPwd.attr("id") + "Message"}`).text(
              "Không được để trống"
            );
            return false;
          }

          if (!/^[a-zA-Z0-9]{8,}$/.test(pwd)) {
            $(`#${loginPwd.attr("id") + "Message"}`).text(
              "Không chứa ký tự đặc biệt và tối thiểu 8 ký tự"
            );
            return false;
          }

          if (pwd != "12345678") {
            $(`#${loginPwd.attr("id") + "Message"}`).text("Sai mật khẩu");
            return false;
          }

          $(`#${loginPwd.attr("id") + "Message"}`).text("");
          return true;
        };
        loginPwd.blur(() => {
          checkLoginPwd();
        });

        loginBtn.click(() => {
          if (checkUserName(loginUsername) && checkLoginPwd()) {
            const userName = loginUsername.val().trim();
            localStorage.setItem(
              "user",
              JSON.stringify({
                name: userName,
              })
            );
            window.location.href = "../index.html";
          }
        });

        signUpUsername.blur(() => {
          checkUserName(signUpUsername);
        });

        const checkEmail = () => {
          const emailVal = email.val().trim();
          if (emailVal.length === 0) {
            $(`#${email.attr("id") + "Message"}`).text("Không được để trống");
            return false;
          }

          if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailVal)) {
            $(`#${email.attr("id") + "Message"}`).text("Email không hợp lệ");
            return false;
          }

          $(`#${email.attr("id") + "Message"}`).text("");
          return true;
        };
        email.blur(checkEmail);

        const checkRealName = () => {
          const realNameVal = realName.val().trim();
          if (realNameVal.length === 0) {
            $(`#${realName.attr("id") + "Message"}`).text(
              "Không được để trống"
            );
            return false;
          }

          if (!/^[A-Z][a-z]+(\s[A-Z][a-z]+)*$/.test(realNameVal)) {
            $(`#${realName.attr("id") + "Message"}`).text(
              "Họ tên không hợp lệ !! Phải viết hoa sau dấu cách"
            );
            return false;
          }

          $(`#${realName.attr("id") + "Message"}`).text("");
          return true;
        };
        realName.blur(checkRealName);

        const checkPwd = () => {
          const pwd = signUpPwd.val().trim();
          if (pwd.length === 0) {
            $(`#${signUpPwd.attr("id") + "Message"}`).text(
              "Không được để trống"
            );
            return false;
          }

          if (!/^[a-zA-Z0-9]{8,}$/.test(pwd)) {
            $(`#${signUpPwd.attr("id") + "Message"}`).text(
              "Không chứa ký tự đặc biệt và tối thiểu 8 ký tự"
            );
            return false;
          }

          $(`#${signUpPwd.attr("id") + "Message"}`).text("");
          return true;
        };
        signUpPwd.blur(checkPwd);

        const checkConfirmPwd = () => {
          const pwd = confirmPwd.val().trim();
          if (pwd.length === 0) {
            $(`#${confirmPwd.attr("id") + "Message"}`).text(
              "Không được để trống"
            );
            return false;
          }

          if (pwd != signUpPwd.val().trim()) {
            $(`#${confirmPwd.attr("id") + "Message"}`).text(
              "Mật khẩu không trùng khớp"
            );
            return false;
          }

          $(`#${confirmPwd.attr("id") + "Message"}`).text("");
          return true;
        };
        confirmPwd.blur(checkConfirmPwd);

        const checkAddress = () => {
          const addressVal = address.val().trim();
          if (addressVal.length === 0) {
            $(`#${address.attr("id") + "Message"}`).text("Không được để trống");
            return false;
          }
          if (!/^[0-9a-zA-Z\s]+$/.test(addressVal)) {
            $(`#${address.attr("id") + "Message"}`).text(
              "Địa chỉ không chứa ký tự đặc biệt"
            );
            return false;
          }
          $(`#${address.attr("id") + "Message"}`).text("");
          return true;
        };
        address.blur(checkAddress);

        const checkBirthday = () => {
          const birthdayVal = birthday.val().trim();
          if (birthdayVal.length === 0) {
            $(`#${birthday.attr("id") + "Message"}`).text(
              "Không được để trống"
            );
            return false;
          }
          $(`#${birthday.attr("id") + "Message"}`).text("");
          return true;
        };
        birthday.blur(checkBirthday);

        const checkPhone = () => {
          const phoneVal = phone.val().trim();
          if (phoneVal.length === 0) {
            $(`#${phone.attr("id") + "Message"}`).text("Không được để trống");
            return false;
          }
          if (!/^[0][0-9]{9}$/.test(phoneVal)) {
            $(`#${phone.attr("id") + "Message"}`).text(
              "Số điện thoại không hợp lệ, tối đa 10 kí tự bắt đầu bằng số 0"
            );
            return false;
          }
          $(`#${phone.attr("id") + "Message"}`).text("");
          return true;
        };
        phone.blur(checkPhone);

        signUpBtn.click(() => {
          if (
            checkUserName(signUpUsername) ||
            checkEmail() ||
            checkPwd() ||
            checkConfirmPwd() ||
            checkAddress() ||
            checkBirthday() ||
            checkPhone() ||
            checkRealName()
          ) {
            localStorage.setItem(
              "user",
              JSON.stringify({
                name: signUpUsername.val().trim(),
                email: email.val().trim(),
                realName: realName.val().trim(),
                address: address.val().trim(),
                birthday: birthday.val().trim(),
                phone: phone.val().trim(),
                gender: genderMale.prop("checked")
                  ? genderMale.val()
                  : genderFemale.val(),
              })
            );
            window.location.href = "../index.html";
          }
        });
      });
    </script>
  </body>
</html>
